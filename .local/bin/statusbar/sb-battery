#!/bin/bash

shopt -s extglob

declare -a batteries

for battery_path in /sys/class/power_supply/!(AC*); do
	status="$(cat "${battery_path}/status")" 

	case "${status}" in
		"Full") status_string="âš¡" ;;
		"Discharging") status_string="ğŸ”‹" ;;
		"Charging") status_string="ğŸ”Œ" ;;
		"Not charging") status_string="ğŸ›‘" ;;
		"Unknown") status_string="â™»ï¸" ;;
		*) status_string="??" ;;
	esac

	capacity="$(cat "${battery_path}/capacity")"
	[ "$status" = "Discharging" ] && [ "$capacity" -le 25 ] && status_string="â—"

	batteries+=("${status_string} ${capacity}%")
done

echo "${batteries[@]}"
